<?xml version="1.0" encoding="UTF-8"?>
<config>
  <connect host="https://atk.alvetk.ru/alve_test/hs/atk-api/getTest" port="25202" js_wsocket="&lt;script type=&quot;text/javascript&quot;&gt;&#10;&#9;// Не забудьте указать данные для авторизации&#10;&#9;const URL = 'ws://username:password@atk.onpoz.ru/channel';&#10;&#10;&#9;let ask_ws = function(msg, callbk) {&#10;&#9;&#9;&#9;if (typeof(msg) === 'object') msg = JSON.stringify(msg);&#10;&#9;&#9;&#9;let agent = new WebSocket(URL);&#10;&#9;&#9;&#9;agent.onerror = function(evt) {&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;console.log('WS Closed on error: ', evt);&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;this.close();&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;};&#10;&#9;&#9;&#9;agent.onclose = function(evt) {&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;if ( evt.code != 1005 ) console.log('Something wrong with WS')&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;};&#10;&#9;&#9;&#9;agent.onopen = function() {&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;this.send( msg );&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;};&#10;&#9;&#9;&#9;agent.onmessage = function(evt) {&#10;&#9;&#9;&#9;&#9;&#9;&#9;let msg = evt.data;&#10;&#9;&#9;&#9;&#9;&#9;&#9;if ( msg.match(/^[\{\[].+[\]\}]$/s) ) {&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;try { msg = JSON.parse( evt.data );&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;} catch(e) { console.log(e) };&#10;&#9;&#9;&#9;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;&#9;&#9;&#9;if ( callbk ) callbk(msg);&#10;&#9;&#9;&#9;&#9;&#9;&#9;this.close();&#10;&#9;&#9;&#9;&#9;&#9;};&#10;&#9;&#9;};&#10;&#10;&#9;let whenGotResponse = function(data) {&#10;&#9;&#9;&#9;console.log(data);&#10;&#9;&#9;&#9;console.log('При получении ответа он будет передан в функцию');&#10;&#9;&#9;};&#10;&#10;&#9;document.addEventListener('DOMContentLoaded', function(e) {&#10;&#9;&#9;&#9;// Подразумевается, что в странице есть элемент класса '.wsquery' для отправки ws-запроса&#10;&#9;&#9;&#9;document.querySelector('.wsquery').onclick = function(e) {&#10;&#9;&#9;&#9;&#9;&#9;let msg = {'description':'В этой переменной можно текст либо объект'};&#10;&#9;&#9;&#9;&#9;&#9;ask_ws( msg, whenGotResponse );&#10;&#9;&#9;&#9;&#9;};&#10;&#9;&#9;});&#10;&lt;/script&gt;&#10;" htlogin="exchangesite" htpasswd="000000" ping_msg="{&quot;code&quot;:&quot;GET_USERS&quot;,&quot;data&quot;:&quot;635543&quot;}"/>
  <utable scr="" type="int(11)" name="_uid" title="Внутренний идентификатор для шлюза"/>
  <utable scr="" name="_fp" title="Идентификатор сесии клиента" type="char(32)"/>
  <utable type="bigint(20)" name="_ip" title="IP-адрес последнего запроса клиента" scr=""/>
  <utable type="tinyint(4)" name="_ustate" title="Состояние регистрации клиента" scr=""/>
  <utable type="int(10)" name="_ltime" title="Время последнего запроса, unixtime" scr=""/>
  <utable type="char(32)" name="_pwd" title="MD5 пароля клиента" scr=""/>
  <utable type="int(10)" name="_rtime" title="Время регистрации, unixtime" scr=""/>
  <utable scr="" type="char(64)" name="_hash" title="Идентификатор для входа по ссылке"/>
  <utable title="Login при регистрации" name="_login" type="char(128)" scr="1,2"/>
  <utable type="char(128)" name="_email" title="eMail при регистрации" scr="1,2"/>
  <utable name="_umode" title="Тип клиента 1С" type="tinyint(4)" scr="1"/>
  <utable scr="1,2" name="name" title="Имя клиента" type="char(20)"/>
  <utable scr="2" title="Годовой оборот компании" name="amount" type="decimal(10,2)"/>
  <utable scr="2" type="file" name="passport" title="Скан паспорта"/>
</config>
